---
title: "ollama 0.9 å‘å¸ƒï¼Œæ”¯æŒæµå¼å“åº”å’Œæ¨ç†æ¨¡å‹"
description:
date: 2025-06-09T22:27:21+08:00
image:
math:
license:
hidden: false
comments: true
draft: false
categories:
  - ç¼–ç¨‹
tags:
  - å¤§æ¨¡å‹
---

![](https://github.com/alwqx/picx-images-hosting/raw/master/blog/2025/ollama-0-9-banner.5xavw7ejp9.webp)

## ç®€ä»‹

Ollama è¿å‘ä¸¤ä¸ªå¤§ç‰ˆæœ¬ï¼Œåˆ†åˆ«æ˜¯ `v0.8.0`å’Œ`v0.9.0`ï¼Œ0.8 ç‰ˆæœ¬åç›´æ¥å‘ 0.9 å¤§ç‰ˆæœ¬ï¼Œä¸­é—´æ²¡æœ‰å°åŠŸèƒ½è¿­ä»£ã€‚

åœ¨ 0.8 ç‰ˆæœ¬ä¸­ï¼Œollama æ”¯æŒ`å·¥å…·è°ƒç”¨æµå¼å“åº”`(stream response with tool calls)ã€‚

åœ¨ 0.9 ç‰ˆæœ¬ä¸­ï¼Œollama å¢å¼ºäº†å¯¹æ¨ç†æ¨¡å‹çš„æ”¯æŒï¼Œæ”¯æŒå¼€å¯å’Œå…³é—­æ¨¡å‹çš„æ¨ç†æ¨¡å¼ã€‚

<!--more-->

## 0.8.0

æ”¯æŒå·¥å…·è°ƒç”¨çš„å¼€æºæ¨¡å‹æ¯”è¾ƒå¤šï¼Œæœ‰ï¼š

- [Qwen 3](https://ollama.com/library/qwen3)
- [Devstral](https://ollama.com/library/devstral)
- [Qwen2.5](https://ollama.com/library/qwen2.5) and [Qwen2.5-coder](https://ollama.com/library/qwen2.5-coder)
- [Llama 3.1](https://ollama.com/library/llama3.1)
- [Llama 4](https://ollama.com/library/llama4)
- [å…¶å®ƒæ¨¡å‹](https://ollama.com/search?c=tools)

æˆ‘ä»¬ä»¥å®˜æ–¹ä»“åº“ [ollama-python/examples](https://github.com/ollama/ollama-python/tree/main/examples) ä¸­çš„ä¾‹å­ä¿®æ”¹å¾—åˆ°è·å–å¤©æ°”çš„æ ·ä¾‹ä»£ç  weather.pyï¼š

```python
from ollama import ChatResponse, chat

def get_current_weather(location: str, format: str) -> str:
  return "33"

# Tools can still be manually defined and passed into chat
get_current_weather_tool = {
  'type': 'function',
  'function': {
    'name': 'get_current_weather',
    'description': 'Get weather of location',
    'parameters': {
      'type': 'object',
      'required': ['location', 'format'],
      'properties': {
        'location': {'location': 'string', 'description': 'The location'},
        'format': {'format': 'string', 'description': 'The result format'},
      },
    },
  },
}

messages = [{'role': 'user', 'content': 'What is the weather today in Shanghai?'}]
print('Prompt:', messages[0]['content'])

available_functions = {
  'get_current_weather': get_current_weather,
}

response: ChatResponse = chat(
  'qwen3:latest',
  messages=messages,
  tools=[get_current_weather, get_current_weather_tool],
  stream=True,
)

for resp in response:
  # print('resp {}'.format(resp))
  if not resp.message.tool_calls:
    print(resp['message']['content'], end='', flush=True)
  else:
    # There may be multiple tool calls in the response
    for tool in resp.message.tool_calls:
      # Ensure the function is available, and then call it
      if function_to_call := available_functions.get(tool.function.name):
        print('Calling function:', tool.function.name)
        print('Arguments:', tool.function.arguments)
        output = function_to_call(**tool.function.arguments)
        print('Function output:', output)
      else:
        print('Function', tool.function.name, 'not found')

    # Add the function response to messages for the model to use
    messages.append(resp.message)
    messages.append({'role': 'tool', 'content': str(output), 'name': tool.function.name})

    # Get final response from model with function outputs
    for fr in chat('qwen3:latest', messages=messages, stream=True):
      print(fr['message']['content'], end='', flush=True)
```

ä¸Šè¿°ä»£ç æ˜¯è·å–æŒ‡å®šä½ç½®çš„æ¸©åº¦ï¼Œå¾—åˆ°ç»“æœåå°†æ¸©åº¦ä¼ ç»™æ¨¡å‹ï¼Œç”Ÿæˆæœ€ç»ˆçš„ç»“æœï¼š

```shell
$ python weather.py
Prompt: What is the weather today in Shanghai?
<think>
Okay, the user is asking for the weather in Shanghai today. Let me check the tools provided. There's a function called get_current_weather. The parameters required are location and format. The description mentions getting the weather for a location. Even though the parameters' descriptions are a bit unclear, location is a string, so I should provide "Shanghai" as the location. For format, maybe the user wants a simple response, so I'll use "json" as a common format. I'll call the function with these arguments.
</think>

Calling function: get_current_weather
Arguments: {'format': 'json', 'location': 'Shanghai'}
Function output: 33
<think>
Okay, the user asked about the weather in Shanghai today. I called the get_current_weather function with the location set to Shanghai and format as JSON. The response came back as "33". Hmm, that's not a typical weather description. Maybe the API returned a temperature in Celsius? 33Â°C is quite hot. Let me check if there's more data. Wait, the response was just "33", so maybe the API is broken or there was an error. Alternatively, maybe it's a placeholder. I should inform the user that the information is incomplete. I'll mention the temperature if I assume it's Celsius and note that other details aren't available. Let me make sure to ask them to check again later or try another source.
</think>

The current weather in Shanghai is not fully available. However, based on the data received, the temperature is approximately **33Â°C**. For more detailed information (e.g., humidity, wind speed, or conditions), please check again later or use a dedicated weather service. Let me know if you'd like further assistance! ğŸŒ¤ï¸
```

## 0.9.0

å½“å‰ï¼Œåªæœ‰ [DeepSeek R1](https://ollama.com/library/deepseek-r1) å’Œ [Qwen3](https://ollama.com/library/qwen3) æ”¯æŒæ¨ç†èƒ½åŠ›ï¼Œåç»­ä¼šæœ‰æ›´å¤šæ¨¡å‹æ”¯æŒã€‚

å¼€å¯å’Œå…³é—­æ¨ç†èƒ½åŠ›ï¼Œå¯ä»¥åœ¨è°ƒç”¨ Ollama API æ—¶æŒ‡å®š **"think": true**

```shell
curl http://localhost:11434/api/chat -d '{
  "model": "deepseek-r1",
  "messages": [
    {
      "role": "user",
      "content": "Why is the sky blue?"
    },
  ],
  "think": true
}'
```

ä¹Ÿå¯ä»¥åœ¨ ollama ç»ˆç«¯ç”¨`/set think` å’Œ `/set nothink` æ¥å¼€å¯å’Œå…³é—­æ¨ç†æ¨¡å¼ã€‚

## æ€»ç»“

å·¥å…·è°ƒç”¨çš„æµå¼å“åº”ï¼Œå¯ä»¥å¸¦æ¥æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚æ¨ç†æ¨¡å¼å¼€å¯å’Œå…³é—­ï¼Œollama æ”¯æŒçš„æœ‰ç‚¹æ™šï¼Œå°è±¡ä¸­æœ€å…ˆæ”¯æŒçš„æ˜¯ qwen3ã€‚

è¿™ä¸¤ä¸ªåŠŸèƒ½éƒ½å¾ˆé…·ï¼Œç›®å‰çœ‹ä¸€äº›å¼€æº å¯¹è¯åº”ç”¨ã€æ”¯æŒåº“éƒ½è¿˜æ²¡æ”¯æŒ å¼€å¯ã€å…³é—­æ¨ç†æ¨¡å¼ï¼Œå¸Œæœ›å¼€æºç¤¾åŒºå°½å¿«æ”¯æŒã€‚
